/*
 * opcua_transportLayer.c
 *
 *  Created on: Dec 19, 2013
 *      Author: opcua
 */
#include "opcua_transportLayer.h"
void TL_getHELMessage_test()
{
	char data[] = {0x48,0x45,0x4c,0x46,0x56,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x01,0x20,0x20,0x20,0x01,0x20,0x20,0x20,0x20,0x01,0x88,0x13,0x20,0x20,0x36,0x20,0x20,0x20,0x6f,0x70,0x63,0x2e,0x74,0x63,0x70,0x3a,0x2f,0x2f,0x43,0x61,0x6e,0x6f,0x70,0x75,0x73,0x2e,0x70,0x6c,0x74,0x2e,0x72,0x77,0x74,0x68,0x2d,0x61,0x61,0x63,0x68,0x65,0x6e,0x2e,0x64,0x65,0x3a,0x31,0x36,0x36,0x36,0x34,0x2f,0x34,0x43,0x45,0x55,0x41,0x53,0x65,0x72,0x76,0x65,0x72};
	struct TL_messageBodyHEL HELmessage;
	struct TL_header header;
	header.MessageSize = 86;


}
/*
 * gets the TL_messageBody
 */
void TL_getHELMessage(char *message, struct TL_messageBodyHEL *HELmessage, struct TL_header *messageHeader)
{
	UInt32 pos = HEADER_LENGTH;
	HELmessage->ProtocolVersion	= convertToUInt32(message[pos]);
	pos = pos + sizeof(UInt32);
	HELmessage->ReceiveBufferSize = convertToUInt32(message[pos]);
	pos = pos +  sizeof(UInt32);
	HELmessage->SendBufferSize = convertToUInt32(message[pos]);
	pos = pos +  sizeof(UInt32);
	HELmessage->MaxMessageSize = convertToUInt32(message[pos]);
	pos = pos +  sizeof(UInt32);
	HELmessage->MaxChunkCount = convertToUInt32(message[pos]);
	pos = pos +  sizeof(UInt32);

	HELmessage->EndpointUrl.Data = message[pos];
	HELmessage->EndpointUrl.Length = messageHeader->MessageSize - pos;
}
/*
 * repond to client request
 */
void TL_buildACKMessage(char *message, struct TL_messageBodyHEL *ACKmessage, struct TL_header *messageHeader)
{

}




